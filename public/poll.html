<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok LIVE Poll</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="poll.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="connection.js"></script>
    <script src="poll.js"></script>
</head>
<body>
    <div class="head">
        <h1>üó≥Ô∏è TikTok LIVE Poll</h1>
        <span class="subTitle">Interactive voting system for TikTok Lives</span>
    </div>

    <!-- Connection Section -->
    <div class="section connection-section">
        <h2>üîó Connection</h2>
        <div class="inputFields">
            <p>Enter the <b>@username</b> of a user who is currently live:</p>
            <input type="text" id="uniqueIdInput" placeholder="@username">
            <input type="button" id="connectButton" value="Connect">
            <span id="connectionStatus" class="status-disconnected">Disconnected</span>
        </div>
    </div>

    <!-- Poll Configuration Section -->
    <div class="section config-section">
        <h2>‚öôÔ∏è Poll Configuration</h2>
        
        <div class="config-row">
            <div class="config-item">
                <label for="numOptions">Number of Options:</label>
                <input type="number" id="numOptions" min="2" max="10" value="4">
                <button id="updateOptionsBtn" class="btn-secondary">Update Options</button>
            </div>
            <div class="config-item">
                <label for="pollTimer">Timer (seconds):</label>
                <input type="number" id="pollTimer" min="10" max="300" value="30">
            </div>
        </div>

        <div class="config-row">
            <div class="config-item full-width">
                <label for="pollQuestion">Poll Question:</label>
                <input type="text" id="pollQuestion" placeholder="Enter your poll question here..." class="full-input">
            </div>
        </div>

        <div id="optionsContainer" class="options-config">
            <!-- Options will be dynamically generated here -->
        </div>

        <div class="poll-controls">
            <button id="startPollBtn" class="btn-primary" disabled>‚ñ∂Ô∏è Start Poll</button>
            <button id="stopPollBtn" class="btn-danger" disabled>‚èπÔ∏è Stop Poll</button>
            <button id="resetPollBtn" class="btn-secondary">üîÑ Reset Poll</button>
        </div>
    </div>

    <!-- Poll Results Section -->
    <div class="section results-section">
        <h2>üìä Poll Results</h2>
        
        <div class="poll-status">
            <div class="timer-display">
                <span class="timer-label">Time Remaining:</span>
                <span id="timerValue" class="timer-value">--</span>
            </div>
            <div class="total-votes">
                <span class="votes-label">Total Votes:</span>
                <span id="totalVotes" class="votes-value">0</span>
            </div>
            <div class="poll-state">
                <span class="state-label">Status:</span>
                <span id="pollState" class="state-value state-idle">Idle</span>
            </div>
        </div>

        <div id="pollQuestion-display" class="poll-question-display">
            <!-- Poll question will be displayed here -->
        </div>

        <div id="resultsContainer" class="results-container">
            <!-- Results will be dynamically generated here -->
        </div>
    </div>

    <!-- Vote Log Section -->
    <div class="section log-section">
        <h2>üìù Vote Log</h2>
        <div class="log-controls">
            <label>
                <input type="checkbox" id="showVoteLogs" checked> Show individual votes
            </label>
            <button id="clearLogBtn" class="btn-secondary btn-small">Clear Log</button>
        </div>
        <div id="voteLog" class="vote-log">
            <!-- Vote logs will appear here -->
        </div>
    </div>
</body>
</html>
